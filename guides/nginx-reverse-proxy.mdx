---
title: "Nginx reverse proxy setup"
description: "Configure nginx as a reverse proxy for your Mintlify documentation with proper header forwarding and SSL support"
---

This guide shows you how to set up nginx as a reverse proxy for your Mintlify documentation, including proper header forwarding for Vercel compatibility and SSL configuration.

## Prerequisites

- Ubuntu/Debian server with sudo access
- Domain name pointed to your server
- Basic familiarity with command line

## Install nginx

Update your package manager and install nginx:

```bash
sudo apt update
sudo apt install nginx
```

Allow nginx through the firewall:

```bash
sudo ufw allow 'Nginx Full'
```

Verify nginx is running:

```bash
systemctl status nginx
```

## Configure reverse proxy

Create a new nginx configuration file for your domain:

```bash
sudo nano /etc/nginx/sites-available/your-domain.com
```

Add the following configuration, replacing `your-domain.com` with your actual domain and `your-subdomain.mintlify.dev` with your Mintlify subdomain:

```nginx
server {
    listen 80;
    listen [::]:80;
    server_name your-domain.com www.your-domain.com;

    # Redirect HTTP to HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name your-domain.com www.your-domain.com;

    # SSL configuration (add your SSL certificate paths)
    ssl_certificate /path/to/your/certificate.crt;
    ssl_certificate_key /path/to/your/private.key;
    
    # SSL security settings
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    ssl_session_cache shared:SSL:10m;

    # Proxy configuration for documentation
    location /docs {
        proxy_pass https://your-subdomain.mintlify.dev;
        proxy_ssl_server_name on;
        proxy_ssl_verify off;
        
        # Required headers for Vercel compatibility
        proxy_set_header Host your-subdomain.mintlify.dev;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
        
        # Custom header for nginx identification (if using Vercel Verified Proxy)
        proxy_set_header X-Nginx-Connecting-IP $remote_addr;
        
        # Preserve original request URI
        proxy_set_header X-Original-URI $request_uri;
        
        # Timeout settings
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
        
        # Buffer settings
        proxy_buffering on;
        proxy_buffer_size 4k;
        proxy_buffers 8 4k;
    }

    location /docs/ {
        proxy_pass https://your-subdomain.mintlify.dev/;
        proxy_ssl_server_name on;
        proxy_ssl_verify off;
        
        # Same headers as above
        proxy_set_header Host your-subdomain.mintlify.dev;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Nginx-Connecting-IP $remote_addr;
        proxy_set_header X-Original-URI $request_uri;
        
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
        
        proxy_buffering on;
        proxy_buffer_size 4k;
        proxy_buffers 8 4k;
    }

    # Vercel domain verification paths (required for SSL certificates)
    location /.well-known/vercel/ {
        proxy_pass https://your-subdomain.mintlify.dev/.well-known/vercel/;
        proxy_ssl_server_name on;
        proxy_ssl_verify off;
        proxy_set_header Host your-subdomain.mintlify.dev;
        
        # Disable caching for verification
        proxy_cache off;
        add_header Cache-Control "no-cache, no-store, must-revalidate";
    }

    # Let's Encrypt ACME challenge (required for SSL certificates)
    location /.well-known/acme-challenge/ {
        proxy_pass https://your-subdomain.mintlify.dev/.well-known/acme-challenge/;
        proxy_ssl_server_name on;
        proxy_ssl_verify off;
        proxy_set_header Host your-subdomain.mintlify.dev;
        
        # Disable caching for verification
        proxy_cache off;
        add_header Cache-Control "no-cache, no-store, must-revalidate";
    }

    # Your main website (optional - configure as needed)
    location / {
        # Configure for your main website
        root /var/www/html;
        index index.html index.htm;
        try_files $uri $uri/ =404;
    }
}
```

## Enable the configuration

Create a symbolic link to enable the site:

```bash
sudo ln -s /etc/nginx/sites-available/your-domain.com /etc/nginx/sites-enabled/
```

Test the nginx configuration:

```bash
sudo nginx -t
```

If the test passes, reload nginx:

```bash
sudo systemctl reload nginx
```

## SSL certificate setup

### Using Let's Encrypt (recommended)

Install Certbot:

```bash
sudo apt install certbot python3-certbot-nginx
```

Obtain SSL certificate:

```bash
sudo certbot --nginx -d your-domain.com -d www.your-domain.com
```

Certbot will automatically update your nginx configuration with SSL settings.

### Using custom certificates

If you have your own SSL certificates, update the paths in the nginx configuration:

```nginx
ssl_certificate /path/to/your/certificate.crt;
ssl_certificate_key /path/to/your/private.key;
```

## Vercel compatibility

For Vercel's Verified Proxy feature to work correctly with nginx, ensure you:

1. **Forward the correct headers**: The configuration above includes `X-Nginx-Connecting-IP` header with the real client IP
2. **Preserve verification paths**: The `/.well-known/` locations are configured to bypass caching
3. **Use proper SSL settings**: Enable SNI with `proxy_ssl_server_name on`

If you're on Vercel Enterprise, contact your Customer Success Manager to enable Verified Proxy Advanced for your nginx setup.

## Testing the setup

1. **Test HTTP redirect**:
   ```bash
   curl -I http://your-domain.com/docs
   ```
   Should return a 301 redirect to HTTPS.

2. **Test HTTPS proxy**:
   ```bash
   curl -I https://your-domain.com/docs
   ```
   Should return a 200 response from your Mintlify documentation.

3. **Verify headers**:
   Check your Mintlify analytics to ensure visitor IPs are being recorded correctly.

## Troubleshooting

### SSL certificate issues

If you encounter SSL verification errors:

```nginx
# Temporarily disable SSL verification for testing
proxy_ssl_verify off;
```

### Header forwarding problems

Verify headers are being passed correctly:

```bash
curl -H "X-Debug: true" https://your-domain.com/docs
```

### Performance optimization

Add caching for static assets:

```nginx
location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg)$ {
    proxy_pass https://your-subdomain.mintlify.dev;
    proxy_cache_valid 200 1h;
    add_header Cache-Control "public, immutable";
}
```

## Security considerations

- Keep nginx updated regularly
- Use strong SSL ciphers and protocols
- Consider implementing rate limiting
- Monitor access logs for suspicious activity
- Use fail2ban for additional protection

## Next steps

- Set up monitoring for your nginx proxy
- Configure log rotation
- Implement automated SSL certificate renewal
- Consider using nginx caching for better performance